{"version":3,"file":"index.js","sources":["../../src/node/utils.ts","../../src/node/compact/utils.ts","../../src/node/generateServiceWorker.ts","../../src/node/helper.ts","../../src/node/locales.ts","../../src/node/prepare.ts","../../src/node/plugin.ts","../../src/node/compact/convert.ts","../../src/node/generateManifest.ts","../../src/node/injectHead.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null],"names":["logger","Logger","deprecatedLogger","options","deprecatedOption","newOption","msg","scope","warn","includes","keys","split","temp","forEach","key","index","length","imageFilter","outDir","maxsize","manifestEntries","warnings","manifest","imageExtensions","entry","some","ext","url","endsWith","stats","fs","statSync","path","resolve","size","push","Math","ceil","appendBaseHelper","base","link","startsWith","replace","appendBase","favicon","apple","icon","maskIcon","msTile","image","icons","map","src","shortcuts","shortcut","screenshots","screenshot","appendBasetoManifest","pwaLocales","install","iOSInstall","cancel","close","prevImage","nextImage","desc","feature","explain","hint","update","__dirname","getDirname","import","meta","CLIENT_FOLDER","ensureEndingSlash","pwaPlugin","legacy","app","convertOptions","env","isDebug","info","toString","shouldPrefetch","async","dir","siteData","userManifestPath","source","userManifestJSONPath","optionManifest","userManifest","JSON","parse","existsSync","readFile","name","title","locales","short_name","description","lang","getRootLang","start_url","display","theme_color","themeColor","background_color","orientation","prefer_related_applications","getManifest","head","metaKeys","linkKeys","item","fallBackIcon","setLink","rel","href","more","setMeta","content","type","sizes","crossorigin","statusBarColor","color","injectLinkstoHead","useSassPalettePlugin","id","define","PWA_LOCALES","getLocales","default","config","SW_FORCE_UPDATE","SW_PATH","swPath","extendsBundlerOptions","addViteOptimizeDepsInclude","addViteSsrNoExternal","useCustomDevServer","stringify","onGenerated","load","manifestPath","dest","writeJSON","flag","succeed","chalk","cyan","relative","process","cwd","generateManifest","swDest","destDir","globPatterns","cacheHTML","cachePic","generateSW","globDirectory","cacheId","cleanupOutdatedCaches","clientsClaim","maximumFileSizeToCacheInBytes","maxSize","manifestTransforms","maxPicSize","generateSWConfig","then","count","toFixed","warning","join","error","blue","generateServiceWorker","clientConfigFile","configImport","rootComponents","showInstall","hintComponent","updateComponent","writeTemp","prepareConfigFile"],"mappings":"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"}